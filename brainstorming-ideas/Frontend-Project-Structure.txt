# Portfolio Tracker Frontend - Project Structure

## Overview
This React + TypeScript application follows a feature-based organization with clear separation of concerns.

## Folder Structure

```
portfolio-tracker-frontend/
â”œâ”€â”€ public/                          # Static assets
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ logo.svg
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                         # API Layer (Backend Communication)
â”‚   â”‚   â”œâ”€â”€ client.ts               # Axios instance with interceptors
â”‚   â”‚   â”œâ”€â”€ endpoints/              # API endpoint functions
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts            # Auth: login, register, logout
â”‚   â”‚   â”‚   â”œâ”€â”€ portfolios.ts     # Portfolio CRUD
â”‚   â”‚   â”‚   â”œâ”€â”€ holdings.ts       # Holdings CRUD
â”‚   â”‚   â”‚   â”œâ”€â”€ transactions.ts   # Transaction CRUD
â”‚   â”‚   â”‚   â””â”€â”€ securities.ts     # Security search & lookup
â”‚   â”‚   â””â”€â”€ hooks/                 # TanStack Query hooks
â”‚   â”‚       â”œâ”€â”€ useAuth.ts        # useLogin, useRegister
â”‚   â”‚       â”œâ”€â”€ usePortfolios.ts  # useGetPortfolios, useCreatePortfolio
â”‚   â”‚       â”œâ”€â”€ useHoldings.ts    # useGetHoldings, useCreateHolding
â”‚   â”‚       â””â”€â”€ useTransactions.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                 # React Components
â”‚   â”‚   â”œâ”€â”€ ui/                    # shadcn/ui components (copy-pasted)
â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ table.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dialog.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dropdown-menu.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ select.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ tabs.tsx
â”‚   â”‚   â”‚   â””â”€â”€ toast.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ auth/                  # Authentication components
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RegisterForm.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ProtectedRoute.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ holdings/              # Holdings feature components
â”‚   â”‚   â”‚   â”œâ”€â”€ HoldingsTable.tsx      # Main table (Yahoo Finance style)
â”‚   â”‚   â”‚   â”œâ”€â”€ HoldingRow.tsx         # Individual row component
â”‚   â”‚   â”‚   â”œâ”€â”€ AddTransactionDialog.tsx
â”‚   â”‚   â”‚   â””â”€â”€ SecuritySearchInput.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ layout/                # Layout components
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx        # Top navigation bar
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx       # Side navigation (future)
â”‚   â”‚   â”‚   â””â”€â”€ Container.tsx     # Content wrapper
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ common/                # Shared/reusable components
â”‚   â”‚       â”œâ”€â”€ LoadingSpinner.tsx
â”‚   â”‚       â”œâ”€â”€ ErrorBoundary.tsx
â”‚   â”‚       â”œâ”€â”€ EmptyState.tsx
â”‚   â”‚       â””â”€â”€ SkeletonTable.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ contexts/                   # React Context providers
â”‚   â”‚   â””â”€â”€ AuthContext.tsx        # Authentication state
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                     # Zustand stores (client state)
â”‚   â”‚   â””â”€â”€ portfolioStore.ts      # Selected portfolio, UI state
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                      # Route pages
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx
â”‚   â”‚   â”‚   â””â”€â”€ RegisterPage.tsx
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ DashboardPage.tsx  # Main holdings view
â”‚   â”‚   â””â”€â”€ NotFoundPage.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                      # TypeScript type definitions
â”‚   â”‚   â”œâ”€â”€ api.types.ts           # API request/response types
â”‚   â”‚   â”œâ”€â”€ entities.types.ts      # Domain entities (User, Portfolio, etc.)
â”‚   â”‚   â””â”€â”€ index.ts               # Barrel export
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                      # Utility functions
â”‚   â”‚   â”œâ”€â”€ cn.ts                  # Class name merger (clsx + twMerge)
â”‚   â”‚   â”œâ”€â”€ formatters.ts          # Currency, percentage, date formatting
â”‚   â”‚   â”œâ”€â”€ validators.ts          # Zod schemas for forms
â”‚   â”‚   â””â”€â”€ constants.ts           # App constants
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                        # Third-party library configs
â”‚   â”‚   â””â”€â”€ queryClient.ts         # TanStack Query configuration
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx                     # Root component with routes
â”‚   â”œâ”€â”€ main.tsx                    # Entry point
â”‚   â”œâ”€â”€ index.css                   # Global styles
â”‚   â””â”€â”€ vite-env.d.ts              # Vite type declarations
â”‚
â”œâ”€â”€ tests/                          # Tests
â”‚   â”œâ”€â”€ unit/                      # Component unit tests
â”‚   â”œâ”€â”€ integration/               # Integration tests
â”‚   â””â”€â”€ e2e/                       # Playwright E2E tests
â”‚
â”œâ”€â”€ .env.example                    # Environment variables template
â”œâ”€â”€ .env.local                      # Local environment (gitignored)
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ postcss.config.js
â””â”€â”€ README.md
```

## Key Concepts

### 1. API Layer (`src/api/`)
**Purpose:** Single source of truth for backend communication.

- **`client.ts`**: Configured axios instance with:
  - Base URL from environment
  - JWT token interceptor
  - Error handling interceptor
  - Request/response transformations

- **`endpoints/`**: Functions that map to backend controllers
  ```typescript
  // Example: src/api/endpoints/holdings.ts
  export const holdingsApi = {
    getPortfolioHoldings: (portfolioId: string) => 
      client.get(`/portfolios/${portfolioId}/holdings`),
    createHolding: (portfolioId: string, data: CreateHoldingDto) =>
      client.post(`/portfolios/${portfolioId}/holdings`, data),
  };
  ```

- **`hooks/`**: TanStack Query wrappers for React components
  ```typescript
  // Example: src/api/hooks/useHoldings.ts
  export const useGetHoldings = (portfolioId: string) => {
    return useQuery({
      queryKey: ['holdings', portfolioId],
      queryFn: () => holdingsApi.getPortfolioHoldings(portfolioId),
    });
  };
  ```

### 2. Components (`src/components/`)
**Organization:** Feature-based folders + shared UI components.

- **`ui/`**: Base components from shadcn/ui (copied, not npm installed)
- **Feature folders** (`auth/`, `holdings/`): Components specific to a feature
- **`layout/`**: Page structure components
- **`common/`**: Truly reusable components (spinners, errors, etc.)

### 3. State Management
**Two types of state, two different tools:**

- **Server State** (data from API): TanStack Query
  - Automatically cached
  - Refetches when stale
  - Handles loading/error states
  
- **Client State** (UI state): Zustand
  - Which portfolio is selected
  - Is sidebar open/closed
  - User preferences

### 4. Types (`src/types/`)
**TypeScript definitions matching backend DTOs:**

```typescript
// Example: src/types/entities.types.ts
export interface Holding {
  id: string;
  portfolioId: string;
  securityId: string;
  totalShares: number;
  averageCost: number | null;
  security: Security;
  currentValue?: number;  // Calculated on frontend
  gainLoss?: number;      // Calculated on frontend
}
```

### 5. Pages (`src/pages/`)
**Route-level components:**
- Compose smaller components
- Handle data fetching
- Manage page-level state
- Connected to React Router

## Development Workflow

### 1. Create a new feature:
```bash
# Example: Adding a new "Dividends" feature

# 1. Add API endpoint
src/api/endpoints/dividends.ts

# 2. Add TanStack Query hook
src/api/hooks/useDividends.ts

# 3. Create components
src/components/dividends/DividendsTable.tsx
src/components/dividends/AddDividendDialog.tsx

# 4. Add types
src/types/entities.types.ts (add Dividend interface)

# 5. Create page
src/pages/dividends/DividendsPage.tsx

# 6. Add route
src/App.tsx (add route)
```

### 2. Add a shadcn/ui component:
```bash
# Run the CLI to copy component into your project
npx shadcn-ui@latest add table

# This adds: src/components/ui/table.tsx
# You can now import and customize it freely
```

### 3. Run the app:
```bash
# Install dependencies
npm install

# Start dev server (runs on http://localhost:3000)
npm run dev

# Backend should be running on http://localhost:5001
# Vite will proxy /api requests to backend automatically
```

## Why This Structure?

### âœ… Scalability
- Clear separation of concerns
- Easy to find code (feature-based)
- New developers onboard quickly

### âœ… Testability
- API layer can be mocked easily
- Components are pure (no direct API calls)
- TanStack Query hooks can be tested in isolation

### âœ… Maintainability
- Change API implementation without touching components
- Swap backends (MERN, Laravel) by only changing `api/` folder
- Type safety catches errors at compile time

### âœ… Performance
- TanStack Query caches API responses
- Code splitting via React Router
- Vite's fast HMR (Hot Module Replacement)

## Next Steps

1. **Day 1 Goal:** Get this structure scaffolded
2. **Day 2 Goal:** Build `HoldingsTable` component
3. **Day 3 Goal:** Add transaction creation flow
4. **Day 4 Goal:** Polish and deploy

Let's start building! ðŸš€